<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>MIP-18: Stage 0 Upgradeability and Multisigs - MIP</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../../../../favicon.svg">
        <link rel="shortcut icon" href="../../../../../favicon.png">
        <link rel="stylesheet" href="../../../../../css/variables.css">
        <link rel="stylesheet" href="../../../../../css/general.css">
        <link rel="stylesheet" href="../../../../../css/chrome.css">
        <link rel="stylesheet" href="../../../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../../../highlight.css">
        <link rel="stylesheet" href="../../../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../../../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../../../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">MIP</h1>

                    <div class="right-buttons">
                        <a href="../../../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/movementlabsxyz/MIP" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
<h1 id="mip-18-stage-0-upgradeability-and-multisigs"><a class="header" href="#mip-18-stage-0-upgradeability-and-multisigs">MIP-18: Stage 0 Upgradeability and Multisigs</a></h1>
<ul>
<li><strong>Description</strong>: Proposal to establish two multisigs, one for engineers and another for the foundation, to facilitate the deployment and upgrade of the Movement Token (MOVEToken) and other upgradeable contracts.</li>
<li><strong>Authors</strong>: <a href="mailto:primata@movementlabs.xyz">Primata</a></li>
<li><strong>Desiderata</strong>:</li>
</ul>
<h2 id="abstract"><a class="header" href="#abstract">Abstract</a></h2>
<p>MIP-18 advocates for the creation of two multisigs: one managed by Core Contributors engineers to propose contract upgrades and another managed by the Movement Foundation to execute them. This proposal enables testing of multisig services while ensuring secure and transparent upgrade processes for the Movement Token. The multisigs will be deployed on Ethereum, Sepolia, and Holesky (if available) networks.</p>
<h2 id="motivation"><a class="header" href="#motivation">Motivation</a></h2>
<p>There is an immediate need to deploy the Movement Token (MOVEToken) using a robust, secure, and auditable upgrade mechanism. By creating two multisigs—one for proposal and one for execution—we ensure a transparent and decentralized governance process over upgrades to critical contracts.</p>
<p>The first multisig allows Core Contributors engineers to propose upgrades via Safe’s multisig service. A remote key will automate the population of upgrade proposals. The second multisig, held by the Movement Foundation, will be responsible for executing the scheduled upgrades after a time delay, ensuring community trust and review.</p>
<p>Also, while developing an independent multisig, handling signature showed to be an issue that might be indicative of better letting signature to be handled by safe.global.</p>
<h2 id="specification"><a class="header" href="#specification">Specification</a></h2>
<h3 id="multisig-setup"><a class="header" href="#multisig-setup">Multisig Setup</a></h3>
<ol>
<li>
<p><strong>Core Contributors Multisig</strong> (4/5 signatures required):</p>
<ul>
<li>Role: Proposing upgrades.</li>
<li>Addresses: [redacted], sep:0x493516F6dB02c9b7f649E650c5de244646022Aa0.</li>
<li>Justification: We leave some wiggle room incase one of the engineers is away. We still need 3/4 engineers to sign.</li>
</ul>
</li>
<li>
<p><strong>Movement Foundation Multisig</strong> (3/5 signatures required, triggerable after 2-day timelock):</p>
<ul>
<li>Role: Executing upgrades.</li>
<li>Addresses: [redacted], sep:0x00db70A9e12537495C359581b7b3Bc3a69379A00.</li>
</ul>
</li>
<li>
<p><strong>Deployer Multisig</strong> (1/2 signatures required):</p>
<ul>
<li>Role: Deploy contracts.</li>
<li>Addresses: [redacted].</li>
</ul>
</li>
</ol>
<p>Both multisigs are part of a timelock mechanism to enforce a 2-day waiting period between the proposal and execution of upgrades. The engineers’ multisig schedules the upgrade, while the foundation multisig executes it after the timelock expires.</p>
<h3 id="workflow"><a class="header" href="#workflow">Workflow</a></h3>
<p><img src="workflow.png" alt="Workflow" /></p>
<ol>
<li>
<p><strong>Deployment</strong>:</p>
<ul>
<li>The Contract Pipeline deploys a new contract implementation and generates transaction data for the upgrade.</li>
</ul>
</li>
<li>
<p><strong>Proposal</strong>:</p>
<ul>
<li>The remote key automates the submission of a transaction proposal using SafeKit API’s <code>proposeTransaction</code>, populating the transaction for review by Core Contributors engineers.</li>
<li>The proposal includes the transaction for <code>timelock.schedule(proxyAdmin.upgradeAndCall(newContractImplementation))</code>.</li>
</ul>
</li>
<li>
<p><strong>Approval</strong>:</p>
<ul>
<li>The Core Contributors engineers review and gather 4/5 signatures to approve the proposal.</li>
<li>Once approved, the <code>timelock.schedule</code> transaction is enacted, holding the upgrade in a 2-day timelock.</li>
</ul>
</li>
<li>
<p><strong>Execution</strong>:</p>
<ul>
<li>After the timelock period, the Movement Foundation multisig gathers 3/5 signatures to execute the upgrade.</li>
<li>This triggers the <code>timelock.execute</code> transaction, allowing the upgrade to be applied to the ProxyAdmin, which will perform the contract upgrade.</li>
</ul>
</li>
</ol>
<h3 id="multisig-security-considerations"><a class="header" href="#multisig-security-considerations">Multisig Security Considerations</a></h3>
<ul>
<li>Believe it is best practice to rely on a service that is fully dedicated to multisigs. Eventual exploits found might open us up to exploits while safe.global could’ve prevent the exploit for us.</li>
<li>Having full control of our multisig deployments is dangerous and more engineering debt.</li>
<li>Having manual verification might stop us from automating a exploit that we did not notice.</li>
<li>Both multisigs serve as a dual signing authorities, ensuring a strict separation between proposing and executing transactions.</li>
<li>The timelock ensures a sufficient review window for all parties, with the ability for either multisig to cancel the transaction during the delay period.</li>
<li>Multisig can fully transition to a fully automated KMS setup once we have that in place. MOVE Token deployment did not follow all procedures, dependency contracts were deployed by an EOA.</li>
<li>Movement Foundation Safe will have ownership of Token Upgradeability - as far as I understood, please correct me if I’m wrong.</li>
</ul>
<h2 id="reference-implementation"><a class="header" href="#reference-implementation">Reference Implementation</a></h2>
<p>The multisigs will be deployed using the Safe global multisig service, with contracts interacting through the SafeKit API. The remote key will automate transaction proposals for review by Core Contributors engineers.</p>
<h2 id="verification"><a class="header" href="#verification">Verification</a></h2>
<ol>
<li>
<p><strong>Correctness</strong>:<br />
This MIP follows the Safe multisig architecture, which has been extensively vetted in decentralized governance.</p>
</li>
<li>
<p><strong>Security Implications</strong>:</p>
<ul>
<li>A remote key introduces automation but requires careful monitoring to prevent unauthorized transactions.</li>
<li>The separation of proposal and execution roles reduces the risk of unilateral decision-making.</li>
<li>If any of the keys part of each multisig are compromised, we must quickly remove it and substitute it with another key.</li>
</ul>
</li>
<li>
<p><strong>Performance Impacts</strong>:</p>
<ul>
<li>The additional timelock delay adds a slight performance lag but is necessary to enhance the security and transparency of upgrades.</li>
<li>Upgrades should not be periodic. This means that manual procedures might be more interesting than full automation.</li>
</ul>
</li>
<li>
<p><strong>Validation Procedures</strong>:</p>
<ul>
<li>The Safe multisig service and timelock mechanisms have been validated by various communities in the Ethereum ecosystem.</li>
<li>It’s not possible to fully automate this service because Movement Founadtion will always require the final signatures.</li>
</ul>
</li>
<li>
<p><strong>Peer Review and Community Feedback</strong>:<br />
Current Governance proposals have indicated that we should have full automation and no access to signing keys. Currently we are a bit far from achieving full automation.</p>
</li>
</ol>
<h2 id="errata"><a class="header" href="#errata">Errata</a></h2>
<p>Any post-publication corrections or updates to this MIP will be documented here to maintain transparency and accuracy.</p>
<h2 id="appendix"><a class="header" href="#appendix">Appendix</a></h2>
<ul>
<li>[R1] Safe Multisig: https://safe.global/</li>
<li>[R2] SafeKit API Documentation: https://docs.safe.global/sdk/api-kit</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../../../Review/gas-fee-calculation/MIP/mip-16/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../../../../Review/andyjsbell/unwanted-framework/MIP/mip-24/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../../../Review/gas-fee-calculation/MIP/mip-16/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../../../../Review/andyjsbell/unwanted-framework/MIP/mip-24/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../../../elasticlunr.min.js"></script>
        <script src="../../../../../mark.min.js"></script>
        <script src="../../../../../searcher.js"></script>

        <script src="../../../../../clipboard.min.js"></script>
        <script src="../../../../../highlight.js"></script>
        <script src="../../../../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
