<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>MIP-60: Crosschain bridge architectures - MIP</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../../../favicon.svg">
        <link rel="shortcut icon" href="../../../../favicon.png">
        <link rel="stylesheet" href="../../../../css/variables.css">
        <link rel="stylesheet" href="../../../../css/general.css">
        <link rel="stylesheet" href="../../../../css/chrome.css">
        <link rel="stylesheet" href="../../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../../highlight.css">
        <link rel="stylesheet" href="../../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../../../../GLOSSARY.html">Glossary</a></li><li class="chapter-item expanded "><a href="../../../../index.html">Approved</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../index.html">MIPs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../Approved/main/MIP/mip-1/index.html">MIP-1: ENTL (Enclave Nonce Time-lock)</a></li><li class="chapter-item expanded "><a href="../../../../Approved/main/MIP/mip-15/index.html">MIP-15: MG (Movement Gloss)</a></li><li class="chapter-item expanded "><a href="../../../../Approved/main/MIP/mip-39/index.html">MIP-39: MOVE Token -- HTLC-based Native Bridge Design</a></li><li class="chapter-item expanded "><a href="../../../../Approved/main/MIP/mip-53/index.html">MIP-53: Conventions for Proposing Progressive L2 Models</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../index.html">MDs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../Approved/main/MD/md-1/index.html">MD-1: Minimize Risk of Compromised Bridge Key without Governance</a></li><li class="chapter-item expanded "><a href="../../../../Approved/main/MD/md-3/index.html">MD-3: MCR under Network Partitions and Asynchrony</a></li><li class="chapter-item expanded "><a href="../../../../Approved/main/MD/md-15/index.html">MD-15: Movement Glossary</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../index.html">MGs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../Approved/main/MG/mg-39/index.html">MG-39:  MOVE Token -- Bridge Design</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../../../../index.html">Review</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../index.html">MIPs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../Review/mikhail/suzuka-da-migrations/MIP/mip-13/index.html">MIP-13:  Suzuka DA Migrations Format</a></li><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/ab-ffs-decoupled-demurrage/MIP/mip-42/index.html">MIP-15: NB-FFS Decoupled Demurrage</a></li><li class="chapter-item expanded "><a href="../../../../Review/gas-fee-calculation/MIP/mip-16/index.html">MIP-16: Calculation of gas fees </a></li><li class="chapter-item expanded "><a href="../../../../Review/primata/mip-18/MIP/mip-18/index.html">MIP-18: Stage 0 Upgradeability and Multisigs</a></li><li class="chapter-item expanded "><a href="../../../../Review/andyjsbell/unwanted-framework/MIP/mip-24/index.html">MIP-24: Removal of redundant functionality from framework</a></li><li class="chapter-item expanded "><a href="../../../../Review/andyjsbell/proxy-root/MIP/mip-25/index.html">MIP-25: Proxy Aptos Framework for Stage 0 governance</a></li><li class="chapter-item expanded "><a href="../../../../Review/primata/mip-27/MIP/mip-27/index.html">MIP-27: Contract Pipeline</a></li><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/actor-naming-conventions/MIP/mip-28/index.html">MIP-28: Naming Conventions for Movement Protocol Design</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip/FFS/MIP/mip-34/index.html">MIP-34: Fast Finality Settlement</a></li><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/ab-ffs-decoupled/MIP/mip-40/index.html">MIP-40: NB-FFS Decoupled</a></li><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/ab-ffs-governed-gas-pool/MIP/mip-44/index.html">MIP-44: NB-FFS Governed Gas Pool</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip/security_falliblity/MIP/mip-46/index.html">MIP-46: Security and Fallibility of the Native Bridge</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip/gas-fees-incremental-additions/MIP/mip-47/index.html">MIP-47: Improve Gas fee collection in phases</a></li><li class="chapter-item expanded "><a href="../../../../Review/0xmovses/aptos-gov-pool/MIP/mip-48/index.html">MIP-48: aptos_governance for Goverened Gas Pool</a></li><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/just-reward/MIP/mip-49/index.html">MIP-49: NB-FFS Governed Fees and Rewards</a></li><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/insured-bridge/MIP/mip-50/index.html">MIP-50: Insured Bridge</a></li><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/the-biarritz-model/MIP/mip-54/index.html">MIP-54: The Biarritz Model</a></li><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/the-bilbao-model/MIP/mip-55/index.html">MIP-55: The Bilbao Model</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip/rate-limiter/MIP/mip-56/index.html">MIP-56: Rate-Limiter for the HTLC-based Native Bridge</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip/informer/MIP/mip-57/index.html">MIP-57: Informer for the Operation of the HTLC-based Native Bridge</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip-58/MIP/mip-58/index.html">MIP-58: Lock/Mint-type Native Bridge with trusted Relayer</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip-crosschain-bridges-background/MIP/mip-60/index.html" class="active">MIP-60: Crosschain bridge architectures</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip/relayer-bootstrap-and-reboot/MIP/mip-61/index.html">MIP-61: Relayer in the lock/mint bridge - Algorithm and Bootstrapping </a></li><li class="chapter-item expanded "><a href="../../../../Review/mip/L2confirmation/MIP/mip-65/index.html">MIP-65: FFS: Fastconfirmations</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip/informer-lockmintbridge/MIP/mip-71/index.html">MIP-71: Informer V1 for the Operation of the Lock/Mint Native Bridge</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip/sanfran-model/MIP/mip-73/index.html">MIP-73: The SanFran Model</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip/rate-limiter-lock-mint-bridge/MIP/mip-74/index.html">MIP-74: Rate limiter for the Lock/Mint-type Native Bridge</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../index.html">MDs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/enclave-crash-resistant-keys/MD/md-2/index.html">MD-2: Enclave Crash-resistant Key Management</a></li><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/long-range-attacks/MD/md-5/index.html">MD-4: Long Range Attacks</a></li><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/gas-offset/MD/md-4/index.html">MD-4: MCR Offsetting Gas Costs</a></li><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/block-validation/MD/md-6/index.html">MD-6: Suzuka Block Validation</a></li><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/block-validation/MD/md-7/index.html">MD-7: Prevent Suzuka MEV Exploits and Censorship</a></li><li class="chapter-item expanded "><a href="../../../../Review/mikhail/suzuka-da-migrations/MD/md-13/index.html">MD-13: Suzuka DA Migrations Format</a></li><li class="chapter-item expanded "><a href="../../../../Review/primata/bridge-timelock-as-state/MD/md-14/index.html">MD-14: Bridge Should Use A More Secure Timelock</a></li><li class="chapter-item expanded "><a href="../../../../Review/andygolay/move-on-bitcoin/MD/md-16/index.html">MD-16: Create MOVE fungible asset on Bitcoin using runes</a></li><li class="chapter-item expanded "><a href="../../../../Review/primata/md-17/MD/md-17/index.html">MD-17: Bridge Fees</a></li><li class="chapter-item expanded "><a href="../../../../Review/primata/bridge-attestors/MD/md-21/index.html">MD-21: Native Bridge with Attesters</a></li><li class="chapter-item expanded "><a href="../../../../Review/andygolay/md-26/MD/md-26/index.html">MD-26: User-facing checks</a></li><li class="chapter-item expanded "><a href="../../../../Review/primata/md-30/MD/md-30/index.html">MD-30: Movement Name Service</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip/FFS/MD/md-34/index.html">MD-34: Fast Finality Settlement</a></li><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/provisions-for-fixed-token-supply/MD/md-38/index.html">MD-38: Provide for Fixed Token Supply when Using Native Bridge and Fast Finality Settlement (FFS)</a></li><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/just-reward/MD/md-49/index.html">MD-49: Movement L2 Gas Fees</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip/L2confirmation/MD/md-65/index.html">MD-65: FFS: Fastconfirmations</a></li><li class="chapter-item expanded "><a href="../../../../Review/issue66/MDMIP-for-bridge-fees/MD/md-69/index.html">MD-69: Bridge fees</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip/informer-lockmintbridge/MD/md-71/index.html">MD-71: Informer service for the Lock/Mint-based Native Bridge</a></li><li class="chapter-item expanded "><a href="../../../../Review/mip/rate-limiter-lock-mint-bridge/MD/md-74/index.html">MD-74: Rate-Limiter for the Lock/Mint-type Native Bridge</a></li></ol></li><li class="chapter-item expanded "><a href="../../../../index.html">MGs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../../Review/l-monninger/ab-ffs-decoupled-demurrage/MG/mg-42/index.html">MG-42: demurrage token</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">MIP</h1>

                    <div class="right-buttons">
                        <a href="../../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/movementlabsxyz/MIP-Testing" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="mip-60-crosschain-bridge-architectures"><a class="header" href="#mip-60-crosschain-bridge-architectures">MIP-60: Crosschain bridge architectures</a></h1>
<ul>
<li><strong>Description</strong>: This MIP provides some background on crosschain bridges designs and trade-offs related to security, decentralization, and performance.</li>
<li><strong>Authors</strong>: <a href="mailto:franck.cassez@movementlabs.xyz">Franck Cassez</a>, <a href="mailto:andreas.penzkofer@movementlabs.xyz">Andreas Penzkofer</a></li>
</ul>
<h2 id="abstract"><a class="header" href="#abstract">Abstract</a></h2>
<p>Crosschain bridges allow assets to be transferred between different blockchains. This MIP provides some background on crosschain bridge designs and the trade-offs related to security, decentralization, and performance.</p>
<h2 id="motivation"><a class="header" href="#motivation">Motivation</a></h2>
<p>To transfer assets from Ethereum to the chain (and back), we have to employ a <em>bridge</em>. Ideally we would re-use an existing bridge, but there is no available bridge template from Ethereum to Move-based chains, so we have to design one.
Designing a bridge between two blockchains is a complex task. As pointed out in <a href="https://ethereum.org/en/developers/docs/bridges/#integrating-bridges">Bridges – Ethereum Foundation</a>:</p>
<blockquote>
<ol>
<li><strong>Building your own bridge</strong> – Building a secure and reliable bridge is not easy, especially if you take a more trust-minimized route. Moreover, it requires years of experience and technical expertise related to scalability and interoperability studies. Additionally, it would require a hands-on team to maintain a bridge and attract sufficient liquidity to make it feasible.</li>
</ol>
</blockquote>
<p>To design our bridge, it may be useful to understand the main types of architectures, their strengths and weaknesses. It can also help us reflect on the different discussions and proposals (MIPs, MDs) and how they relate to the different architectures.</p>
<h2 id="definitions-and-bridge-introduction"><a class="header" href="#definitions-and-bridge-introduction">Definitions and Bridge introduction</a></h2>
<p>Bridge terminology is frequently ambiguous as the following shows but we attempt to clarify the terms used in this MIP.</p>
<p><strong>Base classes of bridges</strong> <a href="https://ieeexplore.ieee.org/document/10634379">[5]</a></p>
<p>There are several base classes of bridges to apply to our setting. We select <strong>Native Bridge</strong> as the most appropriate for our use case.</p>
<ul>
<li><strong>Native Bridges</strong> bootstrap liquidity from a base chain into a different chain, e.g. to onboard users and move value into a chain.</li>
<li><strong>Canonical Bridges</strong> is a term typically used to refer to L1 to L2 bridges, and have a similar meaning to Native Bridges. They typically take a longer period of time to bridge assets than liquidity networks as they require a time period for finality to be established, such as the challenge period for optimistic
rollups.</li>
<li><strong>Validating Bridges</strong> are bridges between Ethereum and another chain, where the bridge contract verifies the state updates proposed by the off-chain system.</li>
<li><strong>Validator or Oracle-based Bridges</strong> rely on a set of external validators or oracles to validate cross-chain transfers.</li>
</ul>
<blockquote>
<p>[!NOTE]
The term <strong>Native Bridge</strong> is used to refer to a bridge that transfers the native ERC-20 <code>$L1MOVE</code> token from a base chain (L1) to the <code>$L2MOVE</code> token on a different chain (L2).</p>
</blockquote>
<p><strong>Liquidity Networks</strong> <a href="https://ieeexplore.ieee.org/document/10634379">[5]</a></p>
<p>The term of Liquidity Networks is associated with</p>
<ul>
<li><strong>Continuous Liquidity Pools</strong> The majority of Liquidity Networks consist of two liquidity pools of assets - one on the source and the other on the destination chain. In this structure, an intermediary token can act as an exchange medium allowing accurate amounts of the final token to be transferred to the user and to rebalance the pools once a transaction has occurred, e.g. RUNE in Thorchain, or stablecoins such as USDC in Stargate.</li>
</ul>
<p>In our setting the intermediary IS the final token, and this could be interpreted as a <strong>lock/unlock</strong> bridge.</p>
<ul>
<li><strong>Continuous Liquidity Pools (CLP) with AMMs</strong> are a subset of Continuous Liquidity Pools that use Automated Market Makers (AMMs) in series. <a href="https://github.com/movementlabsxyz/MIP/pull/40">MIP-40</a> has proposed such a design.</li>
</ul>
<p><strong>Types of bridge mechanisms</strong></p>
<p>There are three types of crosschain bridges. They differ in the way they handle the native assets (source chain) and the representation of the assets (wrapped asset) on the target chain.</p>
<ol>
<li><strong>burn/mint</strong>: the asset is burned on the source chain and an asset is minted on the target chain.
<em>Supply: The bridge operator is in control of creating supply on both chains.</em></li>
<li><strong>lock/mint</strong>: the native asset (minted e.g. in an ERC20 contract) is locked on the source chain and a wrapped asset is minted on the target chain.
<em>Supply: The bridge operator is only in control of minting supply on the target chain (L2). On L1 the bridge operator holds a token pool into/from which tokens get locked/unlocked.</em></li>
<li><strong>lock/unlock</strong>: although difficult to classify in literature, this variant naturally completes the above two types. It may be classified as a subcategory of a swap, a <strong>liquidity network</strong> (see above), or it could be interpreted as a trusted <a href="https://medium.com/@0xmirai77/curve-v1-the-stableswap-invariant-f87ad7641aa0">Automated Market Maker (AMM) with a constant sum invariant</a>. The asset is locked on the source chain and unlocked on the target chain.
<em>Supply: The bridge operator is neither in control of creating new supply on the source chain nor on the target chain. The bridge operator only holds token pools into/from which tokens get locked/unlocked.</em></li>
</ol>
<p>To complete the lingo, we also mention the definition of swaps:</p>
<ol start="4">
<li><strong>swap (atomic)</strong>: A swap is a generic mechanism and allows to swap any asset for any other asset. As a result it can be used to implement a bridge. Assets are swapped from the source chain against, potentially non-equivalent tokens on the target chain. A swap involves two parties, Alice on chain A and Bob on chain B. Both Alice and Bob can withdraw from the swap deals at any time and have a time window to accept the swap deal <a href="https://dl.acm.org/doi/10.1145/3212734.3212736">[1]</a>,<a href="https://dl.acm.org/doi/10.1007/s00778-021-00686-1">[2]</a>. A swap mechanism usually requires an <em>escrow</em> and a <em>time lock</em> mechanism.</li>
</ol>
<blockquote>
<p>[!WARNING]
As both parties can decide to withdraw or accept the swap, a swap requires each party to independently issue a transaction on their chain.</p>
</blockquote>
<blockquote>
<p>[!NOTE]
Source and target imply direction: e.g. for a swap, burn/mint and lock/unlock between a user1 on chain A and a user2 on chain B, the source chain of user1 is chain A and the target chain is chain B. For these three bridge mechanisms the transfer in opposite direction would be called the same. In contrast, <strong>lock/mint</strong> implies that the source chain is the chain where the native asset lives. But the bridge also operates in the opposite direction - however a more correct term for the opposite directin would be a <strong>burn/unlock</strong> mechanism instead.</p>
</blockquote>
<h2 id="specification"><a class="header" href="#specification">Specification</a></h2>
<p>The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “NOT RECOMMENDED”, “MAY”, and “OPTIONAL” in this document are to be interpreted as described in RFC 2119 and RFC 8174.</p>
<h3 id="crosschain-communication-and-the-relayer"><a class="header" href="#crosschain-communication-and-the-relayer">Crosschain communication and the Relayer</a></h3>
<p>The transfer of assets between two chains requires a mechanism to communicate between the two chains. This mechanism is necessarily off-chain: a chain can emit events/messages to a channel but cannot receive event from a channel (they need to be converted to transactions).</p>
<blockquote>
<p>[!TIP]
Crosschain communications can be implemented using different strategies. For a bridge the most common is to use a <em>relayer</em> or <em>messenger</em> that listens to events on one chain and emits corresponding transactions on the other chain.</p>
</blockquote>
<p>The <em>relayer</em> can be <em>trusted</em> or <em>untrusted</em>. Trusted relayers are usually run by the bridge operator and users must trust the operator. Untrusted relayers (trustless bridges) rely on the trust assumptions on the source chain (e.g., Ethereum) and the target chain (e.g., Movement Network) and the bridge operator is not required to be trusted.</p>
<blockquote>
<p>[!TIP]
Trusted relayers are usually faster and more cost-effective, but not decentralized so not censorship resistant. Unstrusted relayers (trustless bridges) offer greater security and decentralization but are usually slower and more expensive.</p>
</blockquote>
<p>There are several MIPs and MDs that discuss the relayer mechanism: <a href="https://github.com/movementlabsxyz/MIP/tree/primata/bridge-attestors/MD/md-21">MD-21</a>, <a href="https://github.com/movementlabsxyz/MIP/pull/46">MIP-46</a>, <a href="https://github.com/movementlabsxyz/MIP/pull/56">MIP-56</a>, <a href="https://github.com/movementlabsxyz/MIP/pull/57">MIP-57</a>, <a href="https://github.com/movementlabsxyz/MIP/pull/58">MIP-58</a>.</p>
<h3 id="what-is-communicated"><a class="header" href="#what-is-communicated">What is communicated?</a></h3>
<p>The relayer mechanism is used to relay information about the <em>state</em> of one chain to the other chain. The relayer monitors the logs of a chain and relays event emitted to the logs. The logs are part of the <em>state</em> of the chain.</p>
<blockquote>
<p>[!WARNING]
The information relayed by the relayer should be reliable and ideally immutable.</p>
</blockquote>
<p>If the relayer relays incorrect information, the bridge can be <em>hacked</em> and assets <em>duplicated</em> or <em>stolen</em> (see <a href="https://github.com/movementlabsxyz/MIP/blob/mip-move-bridge-architecture/MIP/mip-39/README.md">MIP-39</a>, <a href="https://github.com/movementlabsxyz/MIP/tree/mip/security_falliblity/MIP/mip-46">MIP-46</a>) This problem is addressed in <a href="https://github.com/movementlabsxyz/movement/issues/838">issue-838</a>.</p>
<p>On Ethereum, a block is immutable when it is declared <em>final</em>. Until is is final, a block can be <em>reverted</em> (i.e., the transactions in the block are not executed).
Other criteria can be used to accept a block as <em>almost-final</em> with a risk that it is reverted, e.g. k-confirmations, where k is the number of blocks that have been added to the chain since the block was added, see also <a href="https://github.com/movementlabsxyz/movement/issues/838">issue-838</a>.</p>
<blockquote>
<p>[!IMPORTANT]
Since the introduction on blobs on Ethereum, the <a href="https://ethresear.ch/t/big-blocks-blobs-and-reorgs/19674">probability of a 1-confirmed block being reverted is approximately 0.3%</a>, so 3 out of 1000, approximately once every hour. In contrast if a block is final, the probability of it being reverted is negligible as it is protected by the fully economic security of the Ethereum finality mechanism.</p>
</blockquote>
<h3 id="trusted-relayer"><a class="header" href="#trusted-relayer">Trusted Relayer</a></h3>
<p>Using a trusted relayer is a popular choice. The trust assumption on the relayer are:</p>
<ul>
<li><strong>[safety]</strong> it relays  only final states of the chain (source or target).</li>
<li><strong>[liveness]</strong> it relays the states in a timely manner.</li>
</ul>
<p><strong>[safety]</strong>
In the lock/mint design with a trusted relayer, the relayer can mint assets on the target chain. If the relayer is compromised, the assets can be duplicated or stolen. Special care should be taken to ensure that the relayer is not compromised (multisig?).</p>
<p><strong>[liveness]</strong>
Even if the relayer is not compromised, it is hard to guarantee that the relayer will relay each event within a fixed time bound.</p>
<ol>
<li>The message delivery network can be slow or congested.</li>
<li>The relayer submits a transaction (to mint the assets on the target chain) to the mempool of the target chain. But the target chain may be down, congested or slow, or the relayer’s transaction may be low priority.</li>
<li>The relayer must cover the cost of submitting transactions on the target chain. If the relayer’s funds are low (or gas price is high), the relayer may not be able to submit the transaction.</li>
</ol>
<h3 id="designs"><a class="header" href="#designs">Designs</a></h3>
<p><strong>HTLC-based design</strong></p>
<p>Our initial bridge design, <a href="https://github.com/movementlabsxyz/rfcs/blob/main/0040-atomic-bridge/rfc-0040-atomic-bridge.md">RFC-40</a>, is based on an <em>atomic swap</em> (4. above).  The current architecture of our bridge, <a href="https://github.com/movementlabsxyz/MIP/blob/mip-move-bridge-architecture/MIP/mip-39/README.md">MIP-39</a>, borrows ideas from <em>lock/mint</em> and <em>swap</em> (<a href="https://en.bitcoin.it/wiki/Hash_Time_Locked_Contracts">HTLC</a>):</p>
<ul>
<li>if a user wants to bridge from Ethereum to Movement Network, they have to submit two independent transactions: one on Ethereum (lock) and one on Movement Network (mint). This is not user friendly and may be a barrier to adoption.</li>
</ul>
<!-- A bridge is slightly different to a swap in the sense that the two transactions (lock and mint) are not meant to be decoupled.-->
<ul>
<li>another issue is that the first transfer of MOVE tokens requires a user to have some <em>gas tokens</em> (the token used to pay execution fees on the Movement Network). If the gas token is the <code>$L2MOVE</code> token, we have to implement a mechanism to sponsor the first transfer of MOVE tokens.</li>
</ul>
<p><strong>Lock/Mint design</strong></p>
<blockquote>
<p>[!TIP]
A simple <em>lock/mint</em>, <em>burn/mint</em> or <em>lock/unlock</em> mechanism requires only one transaction from the user and is probably more user friendly than the HTLC-based design.</p>
</blockquote>
<p>A simple design that is adopted by many L2 chains is the <em>lock/mint</em> design. A user initiates a transfer on the source chain and the bridge operator is responsible for completing the transfer on the target chain. In this design, the trust assumptions are that the contracts on the source chain and the target chain are <em>correct</em> and implement the lock and mint operations correctly (respectively burn and unlock for the opposite direction).</p>
<p><a href="https://github.com/movementlabsxyz/MIP/pull/58/files">MIP-58</a> is an instance of a <em>lock/mint</em> bridge. Once initiated on the source chain, the user does not need to interact with the target chain to complete the transfer. The bridge operator is responsible for coupling the lock/mint transactions for L1-&gt;L2 transfers. Similarly for L2-&gt;L1 transfers, the bridge operator is responsible for the coupling of the burn/unlock transactions.</p>
<h2 id="security"><a class="header" href="#security">Security</a></h2>
<h3 id="security---htlc-based-design"><a class="header" href="#security---htlc-based-design">Security - HTLC-based design</a></h3>
<p>See <a href="https://github.com/movementlabsxyz/MIP/blob/mip-move-bridge-architecture/MIP/mip-39/README.md">MIP-39</a> for a complete discussion of the security of this type of design.</p>
<h3 id="security---trusted-relayer-design"><a class="header" href="#security---trusted-relayer-design">Security - Trusted-Relayer design</a></h3>
<p>See <a href="#58">Trusted Relayer design</a>.</p>
<p>Assuming we have a <em>correct</em> implementation of the lock/mint contracts on the source and target chains, and a trusted relayer, we may still have to deal with the following issues:</p>
<ul>
<li>Relayer is down (or network is slow): how do we detect that the relayer is down? And what measurements are taken.</li>
<li>How long does it take to complete a transfer? After what time can we consider the transfer as unsuccessful?</li>
<li>How do we cancel transfers? Is it a manual process or do we have a mechanism to automatically cancel transfers and refund users?</li>
<li>We have to accurately estimate the cost of the transfer to charge the user for the relayer transaction on the target chain.</li>
<li>How do we mitigate the risk of gas fees manipulation? For example, if gas fees are low on the L2 chain (which is the expectation), users can submit thousands of transfer transactions. If at the same time, the gas fees are high on the L1, the relayer will incur some large costs to unlock the locked assets.</li>
<li>How do we ensure that for a given (successful) transfer initiation on the source chain, the relayer does not accidentally mint (or unlock) tokens twice.</li>
</ul>
<p>The bridging mechanisms on Arbitrum and Optimism use a <a href="https://docs.arbitrum.io/build-decentralized-apps/cross-chain-messaging">generic message passing framework</a> to communicate between chains. This relies on <em>retryable transactions</em> up to a certain number of retries or deadline.</p>
<blockquote>
<p>[!TIP]
The <a href="https://crosschainriskframework.github.io/framework/01intro/introduction/">crosschain risk framework</a> provides some guidelines and criteria for evaluating crosschain protocols security. Risk mitigation strategies are also discussed in <a href="https://arxiv.org/abs/2410.02029">XChainWatcher</a> and  this <a href="https://doi.org/10.48550/arXiv.2403.00405">SoK on Cross-Chain Bridging Architectural Design Flaws and Mitigations</a>.</p>
</blockquote>
<h2 id="reference-implementation"><a class="header" href="#reference-implementation">Reference Implementation</a></h2>
<!--
  The Reference Implementation section should include links to and an overview of a minimal implementation that assists in understanding or implementing this specification. The reference implementation is not a replacement for the Specification section, and the proposal should still be understandable without it.

  TODO: Remove this comment before submitting
-->
<h2 id="verification"><a class="header" href="#verification">Verification</a></h2>
<!--

  All proposals must contain a section that discusses the various aspects of verification pertinent to the introduced changes. This section should address:

  1. **Correctness**: Ensure that the proposed changes behave as expected in all scenarios. Highlight any tests, simulations, or proofs done to validate the correctness of the changes.

  2. **Security Implications**: Address the potential security ramifications of the proposal. This includes discussing security-relevant design decisions, potential vulnerabilities, important discussions, implementation-specific guidance, and pitfalls. Mention any threats, risks, and mitigation strategies associated with the proposal.

  3. **Performance Impacts**: Outline any performance tests conducted and the impact of the proposal on system performance. This could be in terms of speed, resource consumption, or other relevant metrics.

  4. **Validation Procedures**: Describe any procedures, tools, or methodologies used to validate the proposal against its requirements or objectives. 

  5. **Peer Review and Community Feedback**: Highlight any feedback from peer reviews or the community that played a crucial role in refining the verification process or the proposal itself.


  TODO: Remove this comment before submitting
-->
<p>Needs discussion.</p>
<hr />
<h2 id="errata"><a class="header" href="#errata">Errata</a></h2>
<!--
  Errata should be maintained after publication.

  1. **Transparency and Clarity**: An erratum acknowledges any corrections made post-publication, ensuring that readers are not misled and are always equipped with the most accurate information.

  2. **Accountability**: By noting errors openly, we maintain a high level of responsibility and ownership over our content. It’s an affirmation that we value precision and are ready to correct oversights.

  Each erratum should briefly describe the discrepancy and the correction made, accompanied by a reference to the date and version of the proposal in which the error was identified.

  TODO: Maintain this comment.
-->
<h2 id="references"><a class="header" href="#references">References</a></h2>
<p>[1] Maurice Herlihy: “Atomic Cross-Chain Swaps”. PODC 2018: 245-254 <a href="https://dl.acm.org/doi/10.1145/3212734.3212736">DOI</a></p>
<p>[2] Maurice Herlihy, Barbara Liskov, Liuba Shrira: “Cross-chain deals and adversarial commerce”. VLDB J. 31(6): 1291-1309 (2022) <a href="https://dl.acm.org/doi/10.1007/s00778-021-00686-1">DOI</a></p>
<p>[3] André Augusto, Rafael Belchior, Jonas Pfannschmidt, André Vasconcelos, Miguel Correia: “XChainWatcher: Monitoring and Identifying Attacks in Cross-Chain Bridges”. (2024) <a href="https://arxiv.org/abs/2410.02029">CoRR abs/2410.02029</a></p>
<p>[4] Jakob Svennevik Notland, Jinguye Li, Mariusz Nowostawski, Peter Halland Haro: “SoK: Cross-Chain Bridging Architectural Design Flaws and Mitigations”. (2024) <a href="https://doi.org/10.48550/arXiv.2403.00405">CoRR abs/2403.00405</a></p>
<p>[5] “SoK: Crosschain Token Bridges and Risk”, 2024 IEEE International Conference on Blockchain and Cryptocurrency (ICBC), Dublin, Ireland, 2024, pp. 696-711. <a href="https://ieeexplore.ieee.org/document/10634379">IEEE Xplore</a></p>
<h2 id="appendix"><a class="header" href="#appendix">Appendix</a></h2>
<hr />
<h2 id="copyright"><a class="header" href="#copyright">Copyright</a></h2>
<p>Copyright and related rights waived via <a href="../LICENSE.html">CC0</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../../Review/mip-58/MIP/mip-58/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../../../Review/mip/relayer-bootstrap-and-reboot/MIP/mip-61/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../../Review/mip-58/MIP/mip-58/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../../../Review/mip/relayer-bootstrap-and-reboot/MIP/mip-61/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../../elasticlunr.min.js"></script>
        <script src="../../../../mark.min.js"></script>
        <script src="../../../../searcher.js"></script>

        <script src="../../../../clipboard.min.js"></script>
        <script src="../../../../highlight.js"></script>
        <script src="../../../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
